<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8"/>
    <title>Комментарий</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
</head>
<body>
<div class="container-xxl" th:if="!${comment.book.id}">
    <h3>Книга не найдена</h3>
    <p><a th:href="@{/book}">К списку книг</a></p>
</div>
<div class="container-xxl" th:if="${comment.book.id}">
    <form id="save-form" th:method="post" th:action="@{/comment/save}" th:object="${comment}">

        <h3>Изменить комментарий к книге:</h3>
        <input type="text" th:field="*{id}" class="form-control" hidden="hidden"/>
        <input type="text" th:field="*{book}" class="form-control" hidden="hidden"/>
        <table class="table table-hover">
            <thead>
            <tr>
                <th>Название</th>
                <th>Автор</th>
                <th>Жанр</th>
                <th>Год выхода</th>
            </tr>
            </thead>
            <tbody>
            <tr>
                <td th:text="${comment.book.name}"></td>
                <td th:text="${comment.book.author} ? ${comment.book.author.firstName} + ' ' + ${comment.book.author.lastName} : 'Не найден'"></td>
                <td th:text="${comment.book.genre} ? ${comment.book.genre.name} : 'Не найден'"></td>
                <td th:text="${comment.book.year}"></td>
            </tr>
            </tbody>
        </table>

        <input type="text" th:field="*{content}" class="form-control"
               placeholder="Введите текст комментария"/>
        <button type="submit">Сохранить</button>
    </form>
    <p><a th:href="@{/book/{id}(id=${comment.book.id})}">Назад в книгу</a></p>
</div>

</body>
</html>
